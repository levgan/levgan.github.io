<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>onRecords</title>
    <script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
  </head>
  <body>
    <!-- <pre id="testing">edited ...</pre> -->
    <!-- <pre id="readout">Waiting for data...</pre> -->
    <div id="main"></div>
<script>
        grist.ready({columns: ['ID1', 'ID2'], requiredAccess: 'read table'});
        grist.onRecords(function(records, mappings) {
            // document.getElementById('readout').innerHTML = JSON.stringify(records, null, 2);
            var str1 = "<br><br><div align='center'>loop w mapped props..";
            str1 += "<br><br><table border='1'>";
            for ( var i = 0; i < records.length; i++) {
                var record = records[i];
                const mapped = grist.mapColumnNames(record);
                if (!mapped) {
                    return;
                }
                str1 += "<tr>";
                str1 += "<td>" + mapped.ID1 + "</td>" + "<td>" + mapped.ID2 + "</td>";
                str1 += "</tr>";
            }
            str1 += "</table></div>";
            document.getElementById('main').innerHTML = str1; 
        });
        // await grist.allowSelectBy();
    </script>
  </body>
</html> 
